# with the goodMuonsCharge RVec object, which is created with appropriate configurations and used as RDataFrame::Define and RDataFrame::Alias, it is no longer needed to distinguish the variable to be plotted between W and Z_wlike analyses
# Muon_pt[goodMuonsCharge][0] will always be the first muon with the selected charge and passing predefined selection criteria, for W it might be the only muon in the event, for Z it will automatically be the one with desired charge
# the same is valid for most of the functions

dummy: 0.5: 1,0,1; XTitle="dummy variable", Legend='TR'

max_muon_pt: max_muon_pt : 100,25,200; XTitle="Muon sum p_{T} (GeV)", Legend='TR', IncludeOverflows=True

muon_pt: Muon_pt[goodMuonsCharge][0]: 30,25,55; XTitle="Muon p_{T} (GeV)", Legend='TR', IncludeOverflows=True

muon_eta: Muon_eta[goodMuonsCharge][0]: 24,-2.4,2.4; XTitle="Muon #eta", Legend='TC', IncludeOverflows=True

muon_eta_fine: Muon_eta[goodMuonsCharge][0]: 48,-2.4,2.4; XTitle="Muon #eta", Legend='TC', IncludeOverflows=True



muon_pt_eta: Muon_pt[goodMuonsCharge][0]\:Muon_eta[goodMuonsCharge][0]: 48,-2.4,2.4,29,26,55 ; XTitle='muon #eta', YTitle='muon p_{T} (GeV)', Legend='TR'

muon_pt_eta_other: Muon_pt[goodMuonsOther][0]\:Muon_eta[goodMuonsOther][0]: 48,-2.4,2.4,29,26,55 ; XTitle='muon #eta', YTitle='muon p_{T} (GeV)', Legend='TR'

muon_pt_other: Muon_pt[goodMuonsOther][0]: 30,25,55; XTitle="Other muon p_{T} (GeV)", Legend='TR', IncludeOverflows=True

muon_eta_other: Muon_eta[goodMuonsOther][0]: 24,-2.4,2.4; XTitle="Other muon #eta", Legend='TC', IncludeOverflows=True

muon_eta_other_fine: Muon_eta[goodMuonsOther][0]: 48,-2.4,2.4; XTitle="Other muon #eta", Legend='TC', IncludeOverflows=True

MET_T1_pt: MET_pt: 40,0,80; XTitle="T1MET (GeV)", Legend='TC', IncludeOverflows=True

mt_T1MET: mt_2(Muon_pt[goodMuonsCharge][0],Muon_phi[goodMuonsCharge][0],MET_T1_pt,MET_T1_phi): 60,0,120; XTitle="m_{T}(#mu\,T1MET) (GeV)", Legend='TC', IncludeOverflows=True

mt_wlike_T1MET: mt_wlike_nano(Muon_pt[goodMuonsCharge][0],Muon_phi[goodMuonsCharge][0],Muon_pt[goodMuonsOther][1],Muon_phi[goodMuonsOther][1],MET_T1_pt,MET_T1_phi): 60,0,120; XTitle="W-like m_{T}(#mu\,T1MET) (GeV)", Legend='TC', IncludeOverflows=True

zpt : transversemomentum(Muon_pt[goodMuons],Muon_phi[goodMuons]): 50,0,100 ; XTitle="reco Z p_{T} (GeV)", Legend='TR'

zy : rapidity(Muon_pt[goodMuons],Muon_eta[goodMuons],Muon_phi[goodMuons],Muon_mass[goodMuons]): 50,-2.5,2.5 ; XTitle="reco Z rapidity", Legend='TR'


# other vars not often used

nJet : nJet: 6,-0.5,5.5 ; XTitle="number of jets", Legend='TR'

nmuon: nMuon: 4,-0.5,3.5 ; XTitle="number of muons", Legend='TR', IncludeOverflows=True

mt_ChsMET: mt_2(Muon_pt[goodMuonsCharge][0],Muon_phi[goodMuonsCharge][0],ChsMET_pt,ChsMET_phi): 50,20,120; XTitle="m_{T}(#mu\,ChsMET) (GeV)", Legend='TC', IncludeOverflows=True

mt_MET: mt_2(Muon_pt[goodMuonsCharge][0],Muon_phi[goodMuonsCharge][0],MET_pt,MET_phi): 50,20,120; XTitle="m_{T}(#mu\,MET) (GeV)", Legend='TC', IncludeOverflows=True

mt_DeepMetRespTune: mt_2(Muon_pt[goodMuonsCharge][0],Muon_phi[goodMuonsCharge][0],DeepMETResponseTune_pt,DeepMETResponseTune_phi): 50,20,120; XTitle="m_{T}(#mu\,DeepMETResponseTune) (GeV)", Legend='TC', IncludeOverflows=True

mt_DeepMetResoTune: mt_2(Muon_pt[goodMuonsCharge][0],Muon_phi[goodMuonsCharge][0],DeepMETResolutionTune_pt,DeepMETResolutionTune_phi): 50,20,120; XTitle="m_{T}(#mu\,DeepMETResolutionTune) (GeV)", Legend='TC', IncludeOverflows=True

MET_pt: MET_pt: 40,0,80; XTitle="MET (GeV)", Legend='TC', IncludeOverflows=True


ChsMET_pt: ChsMET_pt: 40,0,80; XTitle="ChsMET (GeV)", Legend='TC', IncludeOverflows=True

muon_pt_eta_phi: Muon_phi[goodMuonsCharge][0]\:Muon_pt[goodMuonsCharge][0]\:Muon_eta[goodMuonsCharge][0]: 48,-2.4,2.4,34,26,60,20,-3.14,3.14 ; XTitle='muon #eta', YTitle='muon p_{T} (GeV)', ZTitle='muon phi', Legend='TR'

PV_z: PV_z: 100,-20,20; XTitle="Primary vertex z (cm)", Legend='TC', IncludeOverflows=True

OtherPV_z: OtherPV_z: 100,-20,20; XTitle="Other primary vertex z (cm)", Legend='TC', IncludeOverflows=True


## W like variables
# should be no longer needed, but kept for reference for the moment (definition might be outdated)

muon_pt_wlike: returnChargeVal(Muon_pt[0],Muon_charge[0],Muon_pt[1],Muon_charge[1],event): 30,25,55; XTitle="Muon p_{T} (GeV)", Legend='TR', IncludeOverflows=True

muon_pt_goodMu_wlike: returnChargeVal(Muon_pt[goodMuons][0],Muon_charge[goodMuons][0],Muon_pt[goodMuons][1],Muon_charge[goodMuons][1],event): 30,25,55; XTitle="Muon p_{T} (GeV)", Legend='TR', IncludeOverflows=True

muon_eta_wlike: returnChargeVal(Muon_eta[0],Muon_charge[0],Muon_eta[1],Muon_charge[1],event): 48,-2.4,2.4; XTitle="Muon #eta", Legend='TC', IncludeOverflows=True

muon_eta_wlike_rebin: returnChargeVal(Muon_eta[0],Muon_charge[0],Muon_eta[1],Muon_charge[1],event): 24,-2.4,2.4; XTitle="Muon #eta", Legend='TC', IncludeOverflows=True

muon_eta_goodMu_wlike: returnChargeVal(Muon_eta[goodMuons][0],Muon_charge[goodMuons][0],Muon_eta[goodMuons][1],Muon_charge[goodMuons][1],event): 24,-2.4,2.4; XTitle="Muon #eta", Legend='TC', IncludeOverflows=True

muon_pt_wlike_other: returnChargeVal(Muon_pt[0],Muon_charge[1],Muon_pt[1],Muon_charge[0],event): 30,25,55; XTitle="Other muon p_{T} (GeV)", Legend='TR', IncludeOverflows=True

muon_eta_wlike_other: returnChargeVal(Muon_eta[0],Muon_charge[1],Muon_eta[1],Muon_charge[0],event): 48,-2.4,2.4; XTitle="Other muon #eta", Legend='TC', IncludeOverflows=True

muon_eta_wlike_rebin_other: returnChargeVal(Muon_eta[0],Muon_charge[1],Muon_eta[1],Muon_charge[0],event): 24,-2.4,2.4; XTitle="Other muon #eta", Legend='TC', IncludeOverflows=True

muon_pt_eta_wlike: returnChargeVal(Muon_pt[0],Muon_charge[0],Muon_pt[1],Muon_charge[1],event)\:returnChargeVal(Muon_eta[0],Muon_charge[0],Muon_eta[1],Muon_charge[1],event): 24,-2.4,2.4,29,26,55 ; XTitle='muon #eta', YTitle='muon p_{T} (GeV)', Legend='TR'

mt_wlike_ChsMET: mt_wlike(Muon_pt[0],Muon_phi[0],Muon_charge[0],Muon_pt[1],Muon_phi[1],Muon_charge[1],ChsMET_pt,ChsMET_phi,event): 60,0,120; XTitle="W-like m_{T}(#mu\,ChsMET) (GeV)", Legend='TC', IncludeOverflows=True


#zmass  : mass_2(Muon_pt[goodMuons][0],Muon_eta[goodMuons][0],Muon_phi[goodMuons][0],0.1057128,Muon_pt[goodMuons][1],Muon_eta[goodMuons][1],Muon_phi[goodMuons][1],0.1057128): 60,60,120; XTitle="reco Z mass (GeV)", Legend='TC', IncludeOverflows=True

#zpt : pt_2(Muon_pt[goodMuons][0],Muon_phi[goodMuons][0],Muon_pt[goodMuons][1],Muon_phi[goodMuons][1]): 50,0,100 ; XTitle="reco Z p_{T} (GeV)", Legend='TR'

#zy : rapidity_2(Muon_pt[goodMuons][0],Muon_eta[goodMuons][0],Muon_phi[goodMuons][0],0.1057128,Muon_pt[goodMuons][1],Muon_eta[goodMuons][1],Muon_phi[goodMuons][1],0.1057128): 50,-2.5,2.5 ; XTitle="reco Z rapidity", Legend='TR'

zmass  : invariantmass(Muon_pt[goodMuons],Muon_eta[goodMuons],Muon_phi[goodMuons],Muon_mass[goodMuons]): 60,60,120; XTitle="reco Z mass (GeV)", Legend='TC', IncludeOverflows=True

# other test stuff

muon_pt_ss: Muon_pt: 35,25,60; XTitle="Muon p_{T} (GeV)", Legend='TR', IncludeOverflows=True

muon_eta_ss: Muon_eta: 48,-2.4,2.4; XTitle="Muon #eta", Legend='TC', IncludeOverflows=True

deltaRgenMu: deltaR(GenPart_eta[GenPart_preFSRLepIdx1],GenPart_phi[GenPart_preFSRLepIdx1],GenPart_eta[GenPart_preFSRLepIdx2],GenPart_phi[GenPart_preFSRLepIdx2]): 80,0,4; XTitle="#DeltaR(#mu\,#mu) (dressed gen muons)", Legend='TC', IncludeOverflows=True

# eta and pt of gen muon from Z that was not reconstructed when selecting events in W phase space

genMuFailReco_eta: varGenLepFailReco(Muon_pdgId[0], GenPart_pdgId[GenPart_preFSRLepIdx1], GenPart_eta[GenPart_preFSRLepIdx1], GenPart_eta[GenPart_preFSRLepIdx2]): 80,-4.0,4.0; XTitle="gen muon #eta (failed reco)", Legend='TC', IncludeOverflows=True

genMuFailReco_pt: varGenLepFailReco(Muon_pdgId[0], GenPart_pdgId[GenPart_preFSRLepIdx1], GenPart_pt[GenPart_preFSRLepIdx1], GenPart_pt[GenPart_preFSRLepIdx2]): 35,20,80; XTitle="gen muon p_{T} (GeV) (failed reco)", Legend='TC', IncludeOverflows=True

genMuFailReco_pt_eta: varGenLepFailReco(Muon_pdgId[0], GenPart_pdgId[GenPart_preFSRLepIdx1], GenPart_pt[GenPart_preFSRLepIdx1], GenPart_pt[GenPart_preFSRLepIdx2])\:varGenLepFailReco(Muon_pdgId[0], GenPart_pdgId[GenPart_preFSRLepIdx1], GenPart_eta[GenPart_preFSRLepIdx1], GenPart_eta[GenPart_preFSRLepIdx2]) : 80,-4.0,4.0,35,20,80; XTitle="gen muon #eta (failed reco)", YTitle="gen muon p_{T} (GeV) (failed reco)", Legend='TC', IncludeOverflows=True

###
# for PU profile

Pileup_nTrueInt: Pileup_nTrueInt: 100,0,100; XTitle="Pileup_nTrueInt", Legend='TC', IncludeOverflows=False

PV_npvsGood: PV_npvsGood: 80,0,80; XTitle="PV_npvsGood", Legend='TC', IncludeOverflows=False

####
# for vertex study

dzVertex_gen_primary__Wpt: (GenVtx_z-PV_z)\:pt_2(GenPart_pt[GenPart_preFSRLepIdx1],GenPart_phi[GenPart_preFSRLepIdx1],GenPart_pt[GenPart_preFSRLepIdx2],GenPart_phi[GenPart_preFSRLepIdx2]) : 50,0,100,200,-1.0,1.0; YTitle="vertex #Deltaz (gen-reco) [cm]",XTitle="W-p_{T} (dressed) [GeV]", Legend='TC', IncludeOverflows=False

dzVertex_gen_primary__dressedLepPt: (GenVtx_z-PV_z)\:if3(fabs(GenPart_pdgId[GenPart_preFSRLepIdx1])==13,GenPart_pt[GenPart_preFSRLepIdx1],GenPart_pt[GenPart_preFSRLepIdx2]): 74,26,100,200,-1.0,1.0; YTitle="vertex #Deltaz (gen-reco) [cm]",XTitle=" leading dressed lepton p_{T} [GeV]", Legend='TC', IncludeOverflows=False

####
# some gen vars
vpt : Vpt_preFSR: [0., 4., 8., 12., 16., 20., 24., 28., 32., 40., 60., 100., 200.] ; XTitle="PreFSR boson p_{T} (GeV)", Legend='TR'
vrap : fabs(Vrap_preFSR): [0, 0.4, 0.8, 1.2, 1.6, 2.0, 2.4, 3.0, 6.0] ; XTitle="PreFSR boson rapidity", Legend='TR'
vpt_vrap: Vpt_preFSR\:Vrap_preFSR: 50,-5,5,50,0,100 ; XTitle='PreFSR boson rapidity', YTitle='PreFSR boson p_{T} (GeV)', Legend='TR'
